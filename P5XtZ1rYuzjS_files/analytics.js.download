!(function(){"use strict";var g=function(a,u){for(var i=0;i<a.length;i++)u(a[i])},b=Object.assign||function(a){for(var u,i=1,o=arguments.length;i<o;i++){u=arguments[i];for(var v in u)Object.prototype.hasOwnProperty.call(u,v)&&(a[v]=u[v])}return a},y=window.location,l=window.document.currentScript,H=l.getAttribute("data-instance")||"AhrefsAnalytics",E=l.getAttribute("data-api")||new URL(l.src).origin+"/api/event",T=l.getAttribute("data-error")||new URL(l.src).origin+"/api/error",I=l.getAttribute("data-track-visibility")!=null,$=l.getAttribute("data-no-pageview-on-load")!=null;function J(a,u,i){var o=new XMLHttpRequest;o.open("POST",a,!0),o.setRequestHeader("Content-Type","text/plain"),o.send(u),o.onreadystatechange=function(){o.readyState===4&&i!=null&&i()}}function f(a){try{a()}catch(i){if(i instanceof Error)J(T,JSON.stringify({message:i.message,stack:i.stack}));else{var u="cannot-stringify-error";try{u=String(i)}catch(o){}J(T,JSON.stringify({message:u,stack:null}))}throw i}}function V(a){document.readyState==="loading"?window.addEventListener("DOMContentLoaded",function(){f(function(){return a()})}):a()}f(function(){function a(t,e){t&&console.warn("Ignoring Event: "+t),e&&e.callback&&e.callback()}function u(t,e){if(/^localhost$|^127(\.[0-9]+){0,2}\.[0-9]+$|^\[::1?\]$/.test(y.hostname)||y.protocol==="file:")return a("localhost",e);if((window._phantom||window.__nightmare||window.navigator.webdriver||window.Cypress)&&!window.__web_analytics)return a(null,e);var n=l.getAttribute("data-key"),r=l.getAttribute("data-domain");if(n==null&&r==null)return a("missing data-key",e);var c;try{c=window.navigator.languages||window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage||window.navigator.systemLanguage}catch(h){}var d={},m=!1;try{for(var q=0;q<l.attributes.length;q++){var C=l.attributes[q];if(C.name.startsWith("data-prop-")){var X=C.name.substring(10),D=C.value;X&&D&&(d[X]=D,m=!0)}}}catch(h){}var N=null;try{N=document.title}catch(h){}var s={};s.n=t,s.u=y.href,c!=null&&(s.l=c),r!=null&&(s.d=r),n!=null&&(s.k=n),s.r=window.document.referrer||null,e&&e.meta&&(s.m=JSON.stringify(e.meta)),(e&&e.props||m)&&(s.p=JSON.stringify(b({},d,e==null?void 0:e.props)));var R;try{R=window.screen.width}catch(h){}R!=null&&(s.sw=R);var M;try{M=window.screen.height}catch(h){}M!=null&&(s.sh=M);var _;try{_=window.devicePixelRatio}catch(h){}return _!=null&&(s.sr=_),N!=null&&(s.t=N),s}function i(t,e){var n=u(t,e);if(n!=null){var r=new XMLHttpRequest;r.open("POST",E,!0),r.setRequestHeader("Content-Type","text/plain"),r.send(JSON.stringify(n)),r.onreadystatechange=function(){r.readyState===4&&e&&e.callback&&e.callback({status:r.status})}}}function o(t,e){var n=navigator.sendBeacon!=null,r=u(t,e);if(r!=null){var c=JSON.stringify(r);if(n){var d=new Blob([c],{type:"text/plain"});navigator.sendBeacon(E,d)}else{var m=new XMLHttpRequest;m.open("POST",E,!0),m.setRequestHeader("Content-Type","text/plain"),m.send(c)}}}window[H]={sendEvent:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];f(function(){i.apply(void 0,t)})}};var v;function w(){f(function(){v!==y.pathname&&(v=y.pathname,i("pageview"))})}var S=window.history;if(S.pushState){var F=S.pushState;S.pushState=function(){F.apply(this,arguments),w()},window.addEventListener("popstate",w)}$||(window.document.visibilityState==="prerender"?window.document.addEventListener("visibilitychange",function(){v||window.document.visibilityState!=="visible"||w()}):w()),I&&(document.addEventListener("visibilitychange",function(){f(function(){if(v==null){var t=document.visibilityState;t==="hidden"?o("x-visibilitychange-hidden"):t==="visible"&&o("x-visibilitychange-visible")}})}),document.addEventListener("pagehide",function(){f(function(){return o("x-pagehide")})}));var K=/\bAhrefsAnalytics\-prop\-([^\s\-]+)\-([^\s]+)/g;function A(t){if(t){var e=t.className;if(e){var n={};K.lastIndex=0;for(var r=null;r=K.exec(e);){var c=r[1],d=r[2];!c||!d||(n[c]=d)}if(Object.keys(n).length!==0)return n}}}function z(t,e){if(!(e!=null&&e.defaultPrevented)&&!(e!=null&&e.type==="auxclick"&&e.button!==1)&&t&&t.href&&!(t.protocol==="data:"||t.protocol==="blob:"||t.protocol==="javascript:")){var n=A(t);o("x-link-click",{props:b({},n,{href:t.href}),meta:{metaKey:String(!!(e!=null&&e.metaKey)),ctrlKey:String(!!(e!=null&&e.ctrlKey)),shiftKey:String(!!(e!=null&&e.shiftKey))}})}}function G(t){return!!t&&t instanceof HTMLAnchorElement&&!!t.href}function Q(t,e){if(!(e!=null&&e.defaultPrevented)&&t&&t.action){var n=A(t);o("x-form-submit",{props:b({},n,{action:t.action})})}}function j(t){return!!t&&t instanceof HTMLFormElement&&!!t.action}function B(t,e){var n=A(e);o(t,{props:n})}var U='*[class^="AhrefsAnalytics-event-"]',W=/\bAhrefsAnalytics\-event\-([^\s]+)/g;function k(t){if(!t||!(t instanceof HTMLElement)||!t.className)return[];var e=null,n=[];for(W.lastIndex=0;e=W.exec(t.className);){var r=e[1];r&&n.push(r)}return n}function Y(t){return k(t).length>0}if(window.MutationObserver!=null){var L=function(t){if(!t.ahrefsAnalytics_click_tracked){t.ahrefsWebAnalytics_click_tracked=!0;var e=function(n){return f(function(){return z(t,n)})};t.addEventListener("click",e),t.addEventListener("auxclick",e)}},O=function(t){if(!t.ahrefsAnalytics_submit_tracked){t.ahrefsWebAnalytics_submit_tracked=!0;var e=function(n){return f(function(){Q(t,n);for(var r=0,c=k(t);r<c.length;r++){var d=c[r];B(d,t)}})};t.addEventListener("submit",e)}},x=function(t){if(!j(t)&&!t.ahrefsAnalytics_event_tracked){t.ahrefsWebAnalytics_event_tracked=!0;var e=function(){f(function(){for(var n=0,r=k(t);n<r.length;n++){var c=r[n];B(c,t)}})};t.addEventListener("click",e)}},Z=new MutationObserver(function(t){f(function(){t.forEach(function(e){e.type==="childList"&&g(e.addedNodes,function(n){n.nodeType===Node.ELEMENT_NODE&&(G(n)?L(n):n.querySelectorAll!=null&&g(n.querySelectorAll("a"),L),j(n)?O(n):n.querySelectorAll!=null&&g(n.querySelectorAll("form"),O),Y(n)?x(n):n.querySelectorAll!=null&&g(n.querySelectorAll(U),x))})})})});V(function(){g(document.querySelectorAll("a"),L),g(document.querySelectorAll("form"),O),g(document.querySelectorAll(U),x),Z.observe(document.body,{childList:!0,subtree:!0})})}{var p=void 0,P=H+"-ready";typeof CustomEvent=="function"?p=new CustomEvent(P,{detail:null,bubbles:!0,cancelable:!0}):typeof document!="undefined"&&document.createEvent&&(p=document.createEvent("CustomEvent"),p.initCustomEvent(P,!0,!0,null)),p!=null&&typeof document!="undefined"&&(document.dispatchEvent?document.dispatchEvent(p):"fireEvent"in document&&document.fireEvent("on"+P,p))}})})();
